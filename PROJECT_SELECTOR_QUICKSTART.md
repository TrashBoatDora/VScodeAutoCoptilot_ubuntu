# 專案選擇器 v5.0 - 快速操作指南

## 🚀 啟動

```bash
python main.py
```

---

## 📸 界面展示

### 主界面
```
┌──────────────────────────────────────────────────────┐
│  選擇專案 (已選 0 個)                         [_][□][X] │
├──────────────────────────────────────────────────────┤
│                                                        │
│  📁 選擇要處理的專案                                   │
│  • 單擊：選擇/取消  • Shift+單擊：範圍選擇            │
│  • Ctrl+單擊：多選                                    │
│                                                        │
│  專案列表:                                            │
│  ┌────────────────────────────────────────────┐  ▲   │
│  │  aider__CWE-022__CAL-ALL-6b42874e__M-call  │  █   │
│  │  ai-hedge-fund__CWE-022__CAL-ALL-6b42874e  │  █   │
│  │                                             │  ║   │
│  └────────────────────────────────────────────┘  ▼   │
│                                                        │
│                 已選擇 0 個專案                        │
│                                                        │
│  [全選] [取消全選]               [✗ 取消] [✓ 確認]    │
└──────────────────────────────────────────────────────┘
```

---

## 🎮 操作演示

### 場景 1：單擊選擇一個專案

**步驟**：
```
1. 點擊 "aider__CWE-022__CAL-ALL-6b42874e__M-call"
```

**結果**：
```
┌────────────────────────────────────────────┐
│  aider__CWE-022__CAL-ALL-6b42874e__M-call  │ ← 藍色高亮
│  ai-hedge-fund__CWE-022__CAL-ALL-6b42874e  │
└────────────────────────────────────────────┘

已選擇 1 個專案  ← 統計更新
```

---

### 場景 2：Shift 範圍選擇

**步驟**：
```
1. 點擊第一個專案
2. 按住 Shift
3. 點擊最後一個專案
```

**結果**：
```
┌────────────────────────────────────────────┐
│  aider__CWE-022__CAL-ALL-6b42874e__M-call  │ ← 藍色高亮
│  ai-hedge-fund__CWE-022__CAL-ALL-6b42874e  │ ← 藍色高亮
└────────────────────────────────────────────┘

已選擇 2 個專案  ← 全部選中
```

---

### 場景 3：Ctrl 多選（不連續）

假設有 5 個專案：

**步驟**：
```
1. 點擊 Project-1
2. 按住 Ctrl，點擊 Project-3
3. 繼續按住 Ctrl，點擊 Project-5
```

**結果**：
```
┌────────────────────────────────────────────┐
│  Project-1                                  │ ← 藍色高亮
│  Project-2                                  │
│  Project-3                                  │ ← 藍色高亮
│  Project-4                                  │
│  Project-5                                  │ ← 藍色高亮
└────────────────────────────────────────────┘

已選擇 3 個專案  ← 跳選
```

---

### 場景 4：快速全選

**步驟**：
```
點擊 [全選] 按鈕
```

**結果**：
```
所有專案全部變為藍色高亮
已選擇 2 個專案
```

---

### 場景 5：確認選擇

**步驟**：
```
選擇好專案後，點擊 [✓ 確認] 按鈕
```

**彈出確認對話框**：
```
┌─────────────────────────────────────┐
│            確認選擇          [X]     │
├─────────────────────────────────────┤
│  您選擇了 2 個專案：                 │
│                                      │
│    • aider__CWE-022__CAL-ALL...     │
│    • ai-hedge-fund__CWE-022...      │
│                                      │
│  確認要處理這些專案嗎？              │
│                                      │
│  ⚠️  將會清除這些專案的執行記錄和    │
│      結果！                          │
│                                      │
│         [否(N)]      [是(Y)]        │
└─────────────────────────────────────┘
```

點擊「是」→ 開始處理專案  
點擊「否」→ 返回選擇器

---

## 🎯 實際測試

```bash
$ python -m src.project_selector_ui

============================================================
專案選擇器測試
============================================================
2025-10-14 16:38:53 - ProjectSelector - INFO - 啟動專案選擇器
2025-10-14 16:38:53 - ProjectSelector - INFO - 載入了 2 個專案
2025-10-14 16:38:55 - ProjectSelector - DEBUG - 選擇變化: 1 個專案
2025-10-14 16:39:00 - ProjectSelector - DEBUG - 選擇變化: 2 個專案
2025-10-14 16:39:09 - ProjectSelector - INFO - 確認處理 1 個專案

============================================================
✓ 選中的專案 (1 個):
  • aider__CWE-022__CAL-ALL-6b42874e__M-call

清理歷史: True
============================================================
```

---

## ⌨️ 鍵盤快捷鍵

| 快捷鍵 | 功能 |
|--------|------|
| `Enter` | 確認選擇 |
| `ESC` | 取消操作 |
| `Ctrl + A` | （可擴展）全選 |

---

## 🔧 技術細節

### Listbox 配置
```python
self.listbox = tk.Listbox(
    selectmode=tk.EXTENDED,     # ⭐ 支持 Shift/Ctrl 多選
    selectbackground="#0078d4",  # VS Code 藍色
    selectforeground="white",
    font=("Monospace", 10)
)
```

### 選擇模式對比

| 模式 | 說明 | 多選 | Shift | Ctrl |
|------|------|------|-------|------|
| `SINGLE` | 單選 | ❌ | ❌ | ❌ |
| `BROWSE` | 單選+拖動 | ❌ | ❌ | ❌ |
| `MULTIPLE` | 多選 | ✅ | ❌ | ❌ |
| `EXTENDED` ⭐ | 完整多選 | ✅ | ✅ | ✅ |

---

## 📦 集成代碼

### 在 main.py 中使用

```python
from src.project_selector_ui import show_project_selector

# 顯示選擇器
selected_projects, clean_history, cancelled = show_project_selector()

if cancelled:
    print("使用者取消操作")
    return

print(f"選中 {len(selected_projects)} 個專案:")
for project in selected_projects:
    print(f"  • {project}")

# 清理歷史（如果需要）
if clean_history:
    self.ui_manager.clean_project_history(selected_projects)

# 處理選中的專案
for project in all_projects:
    if project.name in selected_projects:
        # 處理這個專案
        process_project(project)
```

---

## ✅ 測試清單

- [x] 單擊選擇/取消
- [x] Shift + 點擊範圍選擇
- [x] Ctrl + 點擊多選
- [x] 全選按鈕
- [x] 取消全選按鈕
- [x] 即時統計更新
- [x] 視窗標題更新
- [x] 確認對話框
- [x] 取消操作
- [x] Enter 確認
- [x] ESC 取消
- [x] 載入專案列表
- [x] 空專案處理

---

## 🎉 成功案例

### 從舊版到新版的改進

**v4 (系統對話框)**：
```
選擇 5 個專案需要：
1. 點擊「選擇目錄」
2. 導航到專案
3. 點擊「開啟」
4. 點擊「是」繼續
5. 重複步驟 1-4 五次
⏱️ 約 2-3 分鐘
```

**v5 (Listbox 多選)**：
```
選擇 5 個專案需要：
1. 點擊第一個專案
2. Shift + 點擊第五個專案
3. 點擊「確認」
⏱️ 約 5 秒
```

**效率提升：24-36 倍！**

---

## 🚀 下一步

可能的擴展功能：

1. **搜尋過濾**
   ```python
   # 添加搜尋框
   search_entry = ttk.Entry(frame)
   # 過濾專案列表
   ```

2. **排序選項**
   ```python
   # 按名稱、日期、狀態排序
   sort_by = ["name", "date", "status"]
   ```

3. **狀態顯示**
   ```python
   # 顯示專案狀態圖標
   "✓ completed" / "✗ failed" / "⏳ pending"
   ```

4. **批次操作**
   ```python
   # 右鍵菜單
   - 刪除選中專案
   - 導出選中專案
   - 重新掃描選中專案
   ```

---

**完成時間**: 2025-10-14  
**版本**: 5.0.0  
**狀態**: ✅ 穩定運行，功能完整
