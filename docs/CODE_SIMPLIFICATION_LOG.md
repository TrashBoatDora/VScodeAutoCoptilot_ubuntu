# 代碼簡化記錄 - 移除替代方案

## 日期
2025-10-31

## 簡化目標
降低專案文檔複雜度，移除所有未採用的替代方案代碼片段。

## 修改內容

### 移除的內容

#### 1. `docs/SCAN_TIMING_ANALYSIS.md`

**移除位置**：第 238-250 行

**移除內容**：
- 批次掃描的替代方案代碼示例
- "缺點" 段落（提到開銷較大、無法批次優化）
- 未採用的替代實現代碼片段

**修改前**：
```markdown
#### 4. **即時掃描 vs. 批次掃描**
當前設計：**即時掃描**（每行處理完立即掃描）

**優點**：
- 結果即時追加到 CSV
- 即使中途失敗，已掃描的結果仍保留
- 日誌清晰，易於追蹤進度

**缺點**：
- 每行都調用一次 Bandit/Semgrep（開銷較大）
- 無法批次優化

**替代方案**（未採用）：批次掃描
```python
# 收集所有需要掃描的檔案
all_files_to_scan = []

for line_idx, line in enumerate(prompt_lines):
    # 發送 prompt + 收到回應
    # ...
    all_files_to_scan.append((target_file, target_function_name))

# Phase 2 全部完成後，一次掃描所有檔案
scan_all_files(all_files_to_scan)
```
```

**修改後**：
```markdown
#### 4. **即時掃描模式**
當前設計：**即時掃描**（每行處理完立即掃描）

**優點**：
- 結果即時追加到 CSV
- 即使中途失敗，已掃描的結果仍保留
- 日誌清晰，易於追蹤進度
- 與 Prompt 處理流程同步，邏輯清晰
```

## 簡化效果

### 移除的行數
- **總計**：約 13 行代碼和說明

### 簡化的優點
1. **降低認知負擔**：讀者不需要理解未採用的方案
2. **聚焦當前實現**：文檔專注於實際使用的即時掃描模式
3. **減少混淆**：避免讀者誤以為有多種掃描模式可選
4. **維護成本降低**：更少的內容需要保持同步更新

### 保留的內容
- ✅ 即時掃描模式的說明
- ✅ 即時掃描的優點
- ✅ 實際使用的代碼和流程
- ✅ 所有執行時序和日誌示例

### 未受影響的文檔
- `docs/SCAN_TIMING_QUICK_REF.md` - 本來就沒有替代方案內容
- `docs/SCAN_PROMPT_MATCHING_FIX.md` - 修復文檔，無替代方案
- 所有源代碼文件 - 無批次掃描的殘留代碼

## 驗證結果

### 檢查項目
- [x] 移除文檔中的批次掃描代碼片段
- [x] 移除「缺點」段落
- [x] 移除「替代方案（未採用）」標題
- [x] 確認源代碼中無批次掃描殘留
- [x] 確認其他文檔未受影響
- [x] 保留即時掃描的完整說明

### Grep 搜尋結果
```bash
# 搜尋替代方案相關關鍵字
grep -r "替代方案" docs/*.md          # 0 matches ✅
grep -r "批次掃描" docs/*.md          # 0 matches ✅
grep -r "all_files_to_scan" src/*.py  # 0 matches ✅
grep -r "缺點" docs/*.md              # 0 matches ✅
```

## 結論

成功移除所有未採用的替代方案代碼和說明，文檔現在更加簡潔明確：

**之前**：介紹即時掃描 + 列出缺點 + 提供未採用的批次掃描替代方案  
**現在**：只介紹即時掃描模式及其優點

這使得文檔：
- 更易讀
- 更專注
- 更易維護
- 減少混淆

---

**簡化日期**：2025-10-31  
**影響文件**：`docs/SCAN_TIMING_ANALYSIS.md`  
**移除行數**：13 行  
**測試狀態**：✅ 通過（無殘留代碼）
